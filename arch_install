$Id: arch_install 1477 2011-02-23 09:08:07Z ffjia $

01. $ /arch/setup

02. $ modprobe dm_mod* dm_crypt
    $ cfdisk
    $ cryptsetup

03. $ {pv,vg,lv}create

04. TZ setup

05. $HOSTNAME

06. /etc/rc.conf

    # http://wiki.archlinux.org/index.php/Intel
    # /etc/mkinitcpio.conf => MODULES

    $ sysctl -w vm.swappiness=20
    $ sysctl -w kernel.sysrq=1

    $ vi /etc/rc.local
        hal-disable-polling --device /dev/sr0
        echo min_power > /sys/class/scsi_host/host0/link_power_management_policy
        echo 5 > /proc/sys/vm/laptop_mode

07. # /etc/locale.gen
    $ locale-gen

08. repo setup

09. $ reboot

10. /etc/pacman.conf

11. $ pacman -Syy

12. $ pacman -Syu

13. $ useradd -m -G \
            disk,lp,wheel,log,video,audio,optical,storage,scanner,camera,power,users \
            -s /bin/bash -u 1000 ffjia
    $ passwd ffjia

14. $ pacman -S sudo ssh bash-completion
    $ visudo
        %wheel  ALL=(ALL) ALL
        ffjia   ALL=NOPASSWD: /usr/bin/pacman

15. $ pacman -S gcc make cmake pkg-config fakeroot patch m4
    $ pacman -U vim-svn

    # /etc/sysctl.conf

    # http://en.gentoo-wiki.com/wiki/CFLAGS
    # http://wiki.archlinux.org/index.php/Makepkg.conf
    # /etc/makepkg.conf
        CHOST="x86_64-pc-linux-gnu"
        CFLAGS="-march=native -O2 -pipe"
        CXXFLAGS="${CFLAGS}"
        make -j5

    $ pacman -S acpid pm-utils laptop-mode-tools cpufrequtils

#16. $ /usr/bin/mandb --quiet

17. $ pacman -S ctags perl-tidy screen lftp iptables autossh rsync subversion git
    # /etc/iptables/iptables.rules

18. # INSTALL clyde-git
    $ pacman -S lua-lzlib lua-yajl-git luafilesystem luasocket git
    $ wget http://aur.archlinux.org/packages/clyde-git/clyde-git/PKGBUILD
    $ pacman -S pacman-contrib
    $ yaourt -S aurvote pacman-color
    $ pacman -S pkgtools namcap
    # /etc/pkgtools/pkgfile.conf
        UPDATE_CRON=0

19. $ pacman -S mutt fetchmail procmail postfix w3m \
                gnupg spamassassin wv pinentry perl-locale-gettext \
                libesmtp
    $ pacman -U esmtp
    $ yaourt -S rss2email urlview perl-getopt-mixed
    $ sudo /usr/bin/perlbin/vendor/sa-update

20. $ pacman -S xorg xf86-video-intel

    # xorg.conf.d/
    # ~/.fonts

21. $ pacman -S kdebase-dolphin  kdebase-kappfinder  kdebase-kdepasswd kdebase-kdialog \
                kdebase-kfind  kdebase-kinfocenter  kdebase-konsole kdebase-plasma \
                gtk-qt-engine ttf-dejavu terminus-font

22. $ pacman -S kdenetwork-kopete kdegraphics-okular ktorrent \
                kdegraphics-ksnapshot kdegraphics-gwenview \
                kdeutils-kwallet konversation \
                kdemultimedia-kmix \
                kdeplasma-addons-applets-kimpanel \
                kdeplasma-applets-networkmanagement \
                modemmanager usb_modeswitch
    $ gpasswd -a ffjia network
    $ yaourt -S hdapsd plasma-hdaps-monitor-plasmoid
    $ yaourt -S tp_smapi

# No more needed?
# http://www.linuxjournal.com/content/prettier-fonts-way
23. $ yaourt -S fontconfig-lcd libxft-cleartype cairo-cleartype

24. $ yaourt -S kdedecor-nitrogen-kde4 \
                oxygen-molecule-theme oxygenrefit2-icon-theme xcursor-comix

25. $ yaourt -S xulrunner-kde-opensuse firefox-kde-opensuse kmozillahelper
    # http://kb.mozillazine.org/Disabling_yellow_plugin_bar_-_Firefox
    #1. turn off cache/offline storage
    #2. history -> custom/cookies
    #3. burstnet.pac
    #4. adp/echofon/flashblock/vimperator
    # plugins.hide_infobar_for_missing_plugin
    # network.proxy.socks_remote_dns
    # browser.urlbar.maxRichResults 24
    # browser.tabs.closeButtons 2
    # network.http.pipelining
    # network.http.pipelining.maxrequests 5
    # network.http.proxy.pipelining
    # browser.cache.disk.capacity 0
    # browser.cache.disk.enable

    $ pacman -S flashplugin

26. $ pacman -S ibus ibus-table ibus-table-wubi
    $ yaourt -S ibus-qt
    # wubi86.db

27. #$ pacman -S dnsmasq openntpd openvpn logwatch sysstat lsof

    # http://wiki.archlinux.org/index.php/Pdnsd
    $ pacman -S pdnsd dnsutils stunnel openntpd openvpn logwatch sysstat lsof
    $ groupadd pdnsd
    $ useradd -r -d /var/cache/pdnsd -g pdnsd -s /bin/false pdnsd
    $ chown -R pdnsd:pdnsd /var/cache/pdnsd
    $ chmod 700 /var/cache/pdnsd
    $ chmod 600 /var/cache/pdnsd/pdnsd.cache
    $ cp /etc/resolv.conf /etc/ppp/

    $ yaourt -S polipo adzapper
    $ groupadd polipo
    $ useradd -r -d /var/cache/polipo -g polipo -s /bin/false polipo
    $ chown polipo.polipo /var/cache/polipo
    $ chmod 750 /var/cache/polipo
    $ chown polipo.polipo /var/log/polipo
    $ mkdir -p /var/run/polipo
    $ chmod 750 /var/run/polipo
    $ chown polipo.polipo /var/run/polipo
    # /etc/rc.d/polipo
        su - polipo -s /bin/sh -c "polipo daemonise=true"

    $ pacman -U nginx-unstable

28. $ pacman -S alsa-utils mpd ncmpcpp mutagen
    $ alsaconf
    $ alsactl store
    #$ touch /var/lib/mpd/db
    #$ touch /var/log/mpd/mpd.error
    #$ touch /var/log/mpd/mpd.log
    #$ touch /var/run/mpd/mpd.pid
    #$ touch /var/lib/mpd/mpdstate
    #$ chown -R mpd:mpd /var/lib/mpd
    #$ chown -R mpd:mpd /var/run/mpd
    #$ chown -R mpd:mpd /var/log/mpd
    $ vi /etc/mpd.conf
    $ mpd --create-db
    $ /etc/rc.d/mpd start

29. $ pacman -U mplayer-nogui-git
    $ pacman -S codecs

30. $ pacman -U kernel26-bfs

#######
# http://wiki.archlinux.org/index.php/System_Encryption_with_eCryptfs
31. $ pacman -S keyutils ecryptfs-utils

32. $ pacman -S enca convmv unzip p7zip cksfv ipcalc ntfs-3g rdesktop feh qstardict
    $ yaourt -S ack prename cycle lsb-release dropbox screenfetch
    $ pacman -U qterm-unstable linux_fetion nagstamon

33. $ pacman -S powerpill
    $ yaourt -S bauerbill

# http://wiki.archlinux.org/index.php/Bluetooth
34. $ pacman -S bluez kbluetooth

35. $ pacman -S go-openoffice

36. $ yaourt -S fingerprint-gui

37. $ pacman -S perl-term-readline perl-image-info


Related Links
=============

http://code.google.com/p/ibus/wiki/TableReadme
